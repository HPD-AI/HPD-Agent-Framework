using System;
using System.Reflection;

namespace AgentConsoleTest;

public class ViewDiagnostics
{
    public static void Main(string[] args)
    {
        var asm = Assembly.GetExecutingAssembly();
        var diagnosticType = asm.GetType("HPD.Agent.Diagnostics.SourceGeneratorDiagnostic");

        if (diagnosticType != null)
        {
            var ToolkitsFound = diagnosticType.GetField("ToolkitsFound")?.GetValue(null);
            var report = diagnosticType.GetField("DetailedReport")?.GetValue(null);

            Console.WriteLine("=== SOURCE GENERATOR DIAGNOSTIC REPORT ===\n");
            Console.WriteLine($"Toolkits Found: {ToolkitsFound}\n");
            Console.WriteLine("Detailed Report:");
            Console.WriteLine(report);
        }
        else
        {
            Console.WriteLine("   Diagnostic class not found");
        }
    }
}
